<!DOCTYPE html lang="en">
<html>
    <head>
	    
	<style media="print">
		button.btn
		{
			display: none;	
		}
	</style>
        <meta charset="UTF-8" />

	    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Justin Wyllie English Lessons</title>
        <script>

            function setCookie(cname, cvalue, exdays) {
                const d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                let expires = "expires="+ d.toUTCString();
                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }

            function getCookie(cname) {
                let name = cname + "=";
                let decodedCookie = decodeURIComponent(document.cookie);
                let ca = decodedCookie.split(';');
                for(let i = 0; i <ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }




            window.keaProfile = {};
            keaProfile.email = '';
            keaProfile.name = '';
            keaProfile.ID = '';

            window.onload = function () {
                return;
                var email = getCookie("kea-email");
                var name = getCookie("kea-name");
                if (email == "")
                {
                    var res1 = google.accounts.id.initialize({
                    client_id: '440488237448-kv307jn3dakkotv473jo716jin1enbha.apps.googleusercontent.com',
                    auto_select: true, //if they logged in before and are in account now will not VISUALLY prompt but will call callback
                    callback: handleLogin
                    });
                    google.accounts.id.prompt();
                    console.log("srh called from page in case had not cookie");
                }
                else
                {/*
                    var displayName;
                    if (name != "")
                    {
                        displayName = name;
                    }
                    else
                    {
                        displayName = email;  
                    }
                    //document.getElementById("userName").innerHTML = displayName;
                    //document.getElementById("root").classList.remove("d-none"); 
                    
                    */
                    keaProfile.email = email;
                    keaProfile.name = name;
                    console.log("srh called from page in case had cookie");
                    specialReactHook(keaProfile); 
                  
                }
            };



      
           
            

            function decodeJwtResponse(data)
            {
                return window.decodeJwt(data);
            }

            function handleLogin(response)
            {
                const responsePayload = decodeJwtResponse(response.credential);

                console.log("ID: " + responsePayload.sub);
                console.log('Full Name: ' + responsePayload.name);
                console.log('Given Name: ' + responsePayload.given_name);
                console.log('Family Name: ' + responsePayload.family_name);
                console.log("Image URL: " + responsePayload.picture);
                console.log("Email: " + responsePayload.email);

                keaProfile.email = responsePayload.email;
                keaProfile.name = responsePayload.name;
                keaProfile.ID = responsePayload.sub;
                setCookie("kea-name", keaProfile.name, 30);
                setCookie("kea-email", keaProfile.email, 30);
                //document.getElementById("userName").innerHTML = responsePayload.name;
                //document.getElementById("logout").classList.remove("d-none");
                //document.getElementById("root").classList.remove("d-none");
                console.log("srh called from page in google callback");
                specialReactHook(keaProfile); //my built script has already run. 
                
            }
        </script>
        <script src="https://accounts.google.com/gsi/client" async defer></script>
        <style>
            
        </style>
    </head>
<body>





    <div id="root" class="container">

    </div>

    <script src="/build/bundle.js?330"></script>
</body>
</html>
